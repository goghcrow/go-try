## ğ–ğ¡ğšğ­ ğ¢ğ¬ ğ•˜ğ• -ğ•¥ğ•£ğ•ª

A src2src translator for error-propagating in golang.

## Quick Start

Create source files ending with `_try.go` / `_try_test.go`.

Build tag `//go:build try` required.

Then `go generate -tags try ./...` (or run by IDE whatever).

And it is a good idea to switch custom build tag to `try` when working in goland or vscode,
so IDE will be happy to index and check your code.

## Example

Create file `copyfile_try.go`.

```golang
//go:build try

//go:generate go install github.com/goghcrow/go-try/cmd/trygen@main
//go:generate trygen
package example

import (
	"io"
	"os"

	. "github.com/goghcrow/go-try"
)

//goland:noinspection GoUnhandledErrorResult
func CopyFile(src, dst string) (err error) {
	r := Try(os.Open(src))
	defer r.Close()

	w := Try(os.Create(dst))
	defer func() {
		w.Close()
		if err != nil {
			os.Remove(dst) // only if a â€œtryâ€ fails
		}
	}()

	Try(io.Copy(w, r))
	Try0(w.Close())
	return nil
}
```

run go:generate and output `copyfile.go`.

```golang
//go:build !try

// Code generated by github.com/goghcrow/go-try DO NOT EDIT.
//go:generate go install github.com/goghcrow/go-try/cmd/trygen@main
//go:generate trygen
package example

import (
	. "github.com/goghcrow/go-try/rt"
	"io"
	"os"
)

//goland:noinspection GoUnhandledErrorResult
func CopyFile(src, dst string) (err error) {
	ğ˜ƒğ—®ğ—¹ğŸ­, ğ—²ğ—¿ğ—¿ğŸ® := os.Open(src)
	if ğ—²ğ—¿ğ—¿ğŸ® != nil {
		return ğ—²ğ—¿ğ—¿ğŸ®
	}
	r := ğ˜ƒğ—®ğ—¹ğŸ­
	defer r.Close()
	ğ˜ƒğ—®ğ—¹ğŸ¯, ğ—²ğ—¿ğ—¿ğŸ° := os.Create(dst)
	if ğ—²ğ—¿ğ—¿ğŸ° != nil {
		return ğ—²ğ—¿ğ—¿ğŸ°
	}
	w := ğ˜ƒğ—®ğ—¹ğŸ¯
	defer func() {
		w.Close()
		if err != nil {
			os.Remove(dst)
		}
	}()
	_, ğ—²ğ—¿ğ—¿ğŸ± := io.Copy(w, r)
	if ğ—²ğ—¿ğ—¿ğŸ± != nil {
		return ğ—²ğ—¿ğ—¿ğŸ±
	}
	ğ—²ğ—¿ğ—¿ğŸ² := w.Close()
	if ğ—²ğ—¿ğ—¿ğŸ² != nil {
		return ğ—²ğ—¿ğ—¿ğŸ²
	}
	return nil
}
```