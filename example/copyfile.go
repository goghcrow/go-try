//go:build !try

// Code generated by github.com/goghcrow/go-try DO NOT EDIT.
//go:generate go install github.com/goghcrow/go-try/cmd/trygen@main
//go:generate trygen
package example

import (
	. "github.com/goghcrow/go-try/rt"
	"io"
	"os"
)

//goland:noinspection GoUnhandledErrorResult
func CopyFile(src, dst string) (err error) {
	ğ˜ƒğ—®ğ—¹ğŸ­, ğ—²ğ—¿ğ—¿ğŸ® := os.Open(src)
	if ğ—²ğ—¿ğ—¿ğŸ® != nil {
		return ğ—²ğ—¿ğ—¿ğŸ®
	}
	r := ğ˜ƒğ—®ğ—¹ğŸ­
	defer r.Close()
	ğ˜ƒğ—®ğ—¹ğŸ¯, ğ—²ğ—¿ğ—¿ğŸ° := os.Create(dst)
	if ğ—²ğ—¿ğ—¿ğŸ° != nil {
		return ğ—²ğ—¿ğ—¿ğŸ°
	}
	w := ğ˜ƒğ—®ğ—¹ğŸ¯
	defer func() {
		w.Close()
		if err != nil {
			os.Remove(dst)
		}
	}()
	_, ğ—²ğ—¿ğ—¿ğŸ± := io.Copy(w, r)
	if ğ—²ğ—¿ğ—¿ğŸ± != nil {
		return ğ—²ğ—¿ğ—¿ğŸ±
	}
	Ã˜()
	ğ—²ğ—¿ğ—¿ğŸ² := w.Close()
	if ğ—²ğ—¿ğ—¿ğŸ² != nil {
		return ğ—²ğ—¿ğ—¿ğŸ²
	}
	Ã˜()
	return nil
}
